<!DOCTYPE html>
<html>
<head>
  <title>App Icon Generator Prototype</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, sans-serif;
      padding: 20px;
      max-width: 400px;
      margin: auto;
    }
    img {
      max-width: 100%;
      margin-top: 20px;
      border-radius: 20px;
      border: 1px solid #ccc;
      display: block;
    }
    textarea {
      width: 100%;
      height: 80px;
      margin-top: 10px;
      font-size: 16px;
      padding: 8px;
      border-radius: 8px;
      border: 1px solid #ccc;
      resize: vertical;
    }
    button {
      margin-top: 15px;
      padding: 12px 20px;
      font-size: 18px;
      border-radius: 12px;
      background-color: #007AFF;
      color: white;
      border: none;
    }
  </style>
</head>
<body>

  <h2>App Icon Generator Prototype</h2>

  <label for="imageInput">Upload an image:</label><br>
  <input type="file" id="imageInput" accept="image/*"><br>

  <label for="promptInput">Enter optional text prompts:</label><br>
  <textarea id="promptInput" placeholder="e.g. floral style, pastel colours"></textarea><br>

  <button id="generateBtn">Generate Icon</button>

  <div id="result"></div>

  <script>
    const imageInput = document.getElementById('imageInput');
    const promptInput = document.getElementById('promptInput');
    const generateBtn = document.getElementById('generateBtn');
    const resultDiv = document.getElementById('result');

    generateBtn.addEventListener('click', () => {
      const file = imageInput.files[0];
      if (!file) {
        alert('Please upload an image first.');
        return;
      }

      const promptText = promptInput.value;

      const reader = new FileReader();
      reader.onload = function(e) {
        resultDiv.innerHTML = `
          <h3>Generated Icon Preview</h3>
          <img id="generatedImage" src="${e.target.result}" alt="Uploaded Image">
          <p><strong>Prompt:</strong> ${promptText || '(none)'}</p>
          <button id="downloadBtn">Download Icon</button>
        `;

        const downloadBtn = document.getElementById('downloadBtn');
        const img = document.getElementById('generatedImage');

        downloadBtn.addEventListener('click', () => {
          const link = document.createElement('a');
          link.href = img.src;
          link.download = 'icon.png';
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
        });
      };
      reader.readAsDataURL(file);
    });
  </script>

</body>
</html>
